<!doctype html>
<meta charset="utf-8">
<pre id="out"></pre>
<script>
const out = document.getElementById("out");

async function streamChat() {
    const resp = await fetch("http://80.188.223.202:13748/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer demo-key"
    },
    body: JSON.stringify({
      model: "openai/gpt-oss-120b",
      messages: [{role: "user", content: "Stream a short story, please."}],
      stream: true,
      temperature: 0.7
    })
  });

  const reader = resp.body.getReader();
  const dec = new TextDecoder();
  let buf = "";
  while (true) {
    const {value, done} = await reader.read();
    if (done) break;
    buf += dec.decode(value, {stream:true});
    for (const line of buf.split("\n")) {
      if (!line.startsWith("data:")) continue;
      const data = line.slice(5).trim();
      if (data === "[DONE]") return;
      try {
        const chunk = JSON.parse(data);
        const delta = chunk.choices?.[0]?.delta?.content ?? "";
        out.textContent += delta;
      } catch {}
    }
    buf = "";
  }
}
streamChat();
</script>
